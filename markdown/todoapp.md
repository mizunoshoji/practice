## 作業内容まとめ

### 全体の流れ

中身の前に基本となる大枠をつくる。

エントリーポイント index.html で JS モジュール index.js を読み込む。これは JavaScript のエントリーポイントとなる。index.js は src/App.js というモジュールをインポートする。

なぜこの構成か？が大事。複数のモジュールを連携させたい。連携させて使用するにはモジュールごとにスコープが異なっていると不都合である。別々の script 要素で JS モジュールを読み込むと各モジュールごとにスコープが作成されてしまい連携できない。そこで１つの script 要素でモジュール index.js を読み込み、スコープが異なる状態をさけてモジュール間の連携をしやすくする。

HTML と CSS でアプリケーションの画面を作成する。どこを HTML で定義してどこを JS で動的に作成するかを整理する。

### 作業前のイメージ

画面要素として

- タスクを入力するフィールド
- タスクを追加するボタン
- タスクを表示するリスト
  - タスクごとの状態の表示
  - タスクごとの状態の変更
    - 更新
    - 削除

JS アプリでデータを管理する方法をイメージできない。配列使うのか...?ブラウザのストレージを使うのか...?

設計としては、追加、更新、削除処理をそれぞれモジュール化するとか？
タスクの状態を判断して、どの処理を呼び出すかという流れになるだろう

## このセクションのねらいは?

- データを取得して表示するだけでなくデータの状態を管理する機能を作成できるようにする
- Web アプリ作成のために必要な設計の考え方を身につける
- アプリの表示要素をコンポーネント単位に分割しメンテナンス性を向上させる
- イベント駆動の概念を理解する
- 直接 DOM を更新する方法のデメリット、問題点を理解する
  - DOM を直接更新しても状態が残らない、これは柔軟性がないということになる

## 疑問点

- 入力データをどこに送信して保持しておくのか
- DB がないのに Todo アイテムをどこでどうやって管理するか
- Todo アイテムの状態をどこでどうやって管理するか
- 表示するにもどこからアイテムを取得するのか
- 機能をどう分割してモジュール化するか、作業前にイメージできない
- 操作と更新が密結合になってしまい変更がしにくくなる問題とはどんな問題か
  - モデルとイベントがこの問題をどう解消するのか
- script 要素の type 属性で module を設定するとどうなるのか
- class の理解や実践的な使用に自信がないので調べたい
  - この例では class を名前付きでエクスポートする App.js モジュールを作成している
  - エクスポートされた App クラスを JavaScript のエントリーポイントである index.js でインポートし、new 演算子でインスタンス化、このとき App クラスのコンストラクタが実行されている。
- バンドラー bundler とはどういう役割のツールか
  - browserify はバンドラでたしかモジュールの依存関係を解決するとかだった気がする

## 理解すべき前提

### モジュールスコープ

異なるモジュールスコープを持つモジュールが複数あるとき、あるモジュールが他のモジュールで宣言された変数を直接参照することができない。スコープが異なるので未定義エラーになる。

### 実行コンテキスト、Script と Module

### モジュールを使うときの注意点

- script 要素に type="module"を指定して実行コンテキストがモジュールになるようにする
- モジュールスコープがモジュールごとに作成されることを知っておく
- 名前つきエクスポートとデフォルトエクスポートの使い分けができるようにする
- import 宣言はモジュールのトップレベルでしか利用できない

## 参考リンク

- https://caniuse.com/

  - CanIuse」は、デスクトップおよびモバイル Web ブラウザーでフロントエンド Web テクノロジーをサポートするための最新のブラウザーサポートテーブルを提供します。
